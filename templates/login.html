<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Login - SmartCart</title>
    <link rel="icon" type="png" href="/static/img/favicon.ico" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/login.css')
    }}"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=BBH+Sans+Bartle&family=BBH+Sans+Hegarty&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="shortcut icon"
      href="../static/favicon.ico"
      type="image/x-icon"
    />
  </head>
  <body>
    <a class="voltar" href="/"><img src="/static/img/Seta.png" alt="" /></a>
    <div class="container">
      <div class="container-login">
        <h3>Login</h3>
        <form method="POST">
          <label><b>CNPJ:</b></label>
          <input
            type="text"
            id="cnpj"
            name="cnpj"
            placeholder="XX.XXX.XXX/YYYY-ZZ"
            class="cnpj"
            required
          /><br />
          <label><b>Senha:</b></label>
          <input
            type="password"
            name="senha"
            placeholder="Ex.: 1234"
            class="senha"
            autocomplete="off"
            required
          /><br />
          <button type="submit">Login</button>
          {% if request.args.get('erro') %}
          <p style="color: red"><b>{{ request.args.get('erro') }}</b></p>
          {% endif %} {% with mensagens =
          get_flashed_messages(with_categories=True) %} {% if mensagens %} {%
          for categoria, msg in mensagens %}
          <p class="msg {{ categoria }}">{{ msg }}</p>
          {% endfor %} {% endif %} {% endwith %}
        </form>
        <p class="conta">NÃ£o tem conta? <a href="/cadastro">Cadastrar-se</a></p>
      </div>
    </div>

    <script>
      let cnpj = document.getElementById("cnpj");

      cnpj.addEventListener("input", () => {
        let n = cnpj.value.replace(/\D/g, "");

        n = n.substring(0, 14);

        if (n.length > 12) {
          n = n.replace(
            /(\d{2})(\d{3})(\d{3})(\d{4})(\d{0,2})/,
            "$1.$2.$3/$4-$5"
          );
        } else if (n.length > 8) {
          n = n.replace(/(\d{2})(\d{3})(\d{3})(\d{0,4})/, "$1.$2.$3/$4");
        } else if (n.length > 5) {
          n = n.replace(/(\d{2})(\d{3})(\d{0,3})/, "$1.$2.$3");
        } else if (n.length > 2) {
          n = n.replace(/(\d{2})(\d{0,3})/, "$1.$2");
        } else {
          n = n.replace(/(\d{0,2})/, "$1");
        }

        cnpj.value = n;
      });
    </script>
  </body>
</html>
